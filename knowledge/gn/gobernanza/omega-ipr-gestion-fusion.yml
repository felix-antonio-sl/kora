_manifest:
  urn: "urn:gorenuble:omega:ontology:ipr-gestion-fusion:1.0.0"
  federation:
    visibility: internal
    license: "Institutional Use Only"
  provenance:
    created_by: "GORE Ñuble"
    created_at: "2026-02-19"
    last_modified_at: "2026-02-19"

# Ontología Categorial Ω-IPR: Fusión Gestión + Selector
# Formalización profunda basada en Categoría Ω (OPM × WS/IS)
---
_meta:
  urn: urn:gorenuble:omega:ontology:ipr-gestion-fusion:1.0.0
  type: Ω-Ontology
  schema: urn:goreos:omega:schema:2.0.0
  based_on:
    - urn:fxsl:cat:omega-opm-ws:1.0.0
    - urn:kora:gn:gestion-ipr:1.0.0
    - urn:kora:gn:selector-ipr:3.1.0
  date: 2025-12-25
  description: |
    Fusión categorial profunda de los dominios de Gestión Operacional IPR y 
    Selector de Vías de Financiamiento. Utiliza construcciones universales:
    - Fibración de Grothendieck para polimorfismo de mecanismos
    - Mónadas separadas para cada sistema de evaluación (RATE, RF, ITF, CONCURSO)
    - Coalgebra para ciclo de vida IPR
    - Pullback para admisibilidad documental
    - Profuntor Selector ↔ Gestión

LLM_Parsing_Instructions:
  ID: KODA-LLM-PARSER-01
  Req: Mandatory block following Metadata.
  Prohib: Using for artifact creation or translation.
  Content: |
    BEGIN_LLM_INSTRUCTIONS
    You are an AI agent consuming a KODA artifact. Parse with absolute fidelity.

    FIDELITY: Preserve meat (essential information) and skeleton (structure: headers, IDs, lists, tables) with zero loss. Ignore fat (filler words, rhetoric, stylistic prose).

    LEXICON (expand before processing): Act->Action, Cond->Condition, Ctx->Context, Ctx_Required->Required External Reference, Ctx_Optional->Optional External Reference, Def->Definition, Ex->Example, Mssn->Mission, Obj->Objective, Proc->Process, Purp->Purpose, Ref->Reference, XRef->Cross-Artifact Reference, XRef_Required->Mandatory Cross-Artifact Reference, Req->Requirement, Res->Result, Src->Source, Prohib->Prohibition, Warn->Warning, Just->Justification, Rec->Recommendation

    REFERENCE POLICY: Ref: is internal only—must point to existing ID within THIS document. XRef/XRef_Required: are external only—must point to a URN (optionally with #ID fragment) in another artifact. External documents without specific ID use Ctx:, Ctx_Required:, or Ctx_Optional:.

    LANGUAGE POLICY: Keywords in English, content in original language. Never translate content.
    END_LLM_INSTRUCTIONS

# ═══════════════════════════════════════════════════════════════════════════════
# SECCIÓN 1: Ω-OBJECTS (Entidades Fundamentales Exhaustivas)
# ═══════════════════════════════════════════════════════════════════════════════

omega_objects:
  # ─────────────────────────────────────────────────────────────────────────────
  # 1.1 INTERVENCIONES PÚBLICAS REGIONALES
  # ─────────────────────────────────────────────────────────────────────────────
  - id: Ω-IPR
    type: Ω-Object
    essence: Informational
    description: "Intervención Pública Regional: unidad atómica de financiamiento del GORE"
    source_ids: [DEF-IPR, GN-IPR-GLOS-IPR]
    subtypes:
      - id: Ω-IDI
        name: "Iniciativa de Inversión"
        description: "Proyectos de capital que crean, amplían o reponen activos"
        subtitulos: [Subt.31, Subt.33]
        source_id: DEF-IDI

      - id: Ω-PPR
        name: "Programa Público Regional"
        description: "Gasto corriente o mixto para entrega de servicios"
        subtitulos: [Subt.24]
        source_id: DEF-PPR

      - id: Ω-ESTUDIO
        name: "Estudio Básico"
        description: "Análisis técnico previo (C33)"
        via: MEC-C33-ESTUDIOS

      - id: Ω-ANF
        name: "Adquisición de Activos No Financieros"
        description: "Compra de activos aislados (C33)"
        via: MEC-C33-ANF
        cofinanciamiento_minimo: "20%"

      - id: Ω-CONSERVACION
        name: "Proyecto de Conservación"
        description: "Mantención de activos existentes"
        condicion: "Costo ≤ 30% reposición"
        via: MEC-C33-CONSERVACION

      - id: Ω-SUBVENCION
        name: "Subvención 8% FNDR"
        description: "Actividades acotadas de vinculación comunitaria"
        via: MEC-SUBV8

  # ─────────────────────────────────────────────────────────────────────────────
  # 1.2 MECANISMOS DE FINANCIAMIENTO (Fibras)
  # ─────────────────────────────────────────────────────────────────────────────
  - id: Ω-MECANISMO
    type: Ω-Object (Fiber Index)
    description: "Vía de financiamiento que determina reglas, proceso y sistema de evaluación"

    fiber_proyectos:
      - id: MEC-SNI-GENERAL
        name: "SNI General"
        description: "Proyectos con evaluación MDSF completa"
        evaluador: MDSF
        dictamen: RATE
        source_id: MEC-SNI-GENERAL

      - id: MEC-FRIL
        name: "Fondo Regional de Infraestructura Local"
        description: "Infraestructura menor < 5000 UTM, ejecutor municipal"
        evaluador: GORE
        dictamen: APROBACION_TECNICA
        tope_utm: 5000
        tope_regional_nuble: 4545
        source_id: MEC-FRIL

      - id: MEC-C33-CONSERVACION
        name: "Circular 33 - Conservación"
        description: "Mantención de activos, requiere AD"
        evaluador: MDSF
        dictamen: AD
        condicion: "Costo ≤ 30% reposición"

      - id: MEC-C33-ANF
        name: "Circular 33 - Activos No Financieros"
        description: "Adquisición de activos aislados"
        evaluador: MDSF
        dictamen: AD
        cofinanciamiento: "≥20%"

      - id: MEC-C33-ESTUDIOS
        name: "Circular 33 - Estudios Básicos"
        description: "Estudios técnicos para terceros"
        evaluador: MDSF
        dictamen: AD

      - id: MEC-5000UTM
        name: "Proyectos < 5000 UTM"
        description: "Exentos de RS por monto"
        evaluador: GORE
        dictamen: APROBACION_TECNICA
        condicion: "Sin fraccionamiento ni impedimentos"

      - id: MEC-FRPD-CAPITAL
        name: "FRPD - Inversión Productiva"
        description: "Royalty para proyectos de capital productivo"
        evaluador: COMITE_FRPD
        dictamen: CONCURSO
        habilitados: [CORFO, ANID, Universidades]

    fiber_programas:
      - id: MEC-G06-DIRECTA
        name: "Glosa 06 - Ejecución Directa"
        description: "Programas ejecutados por el propio GORE"
        evaluador: DIPRES/SES
        dictamen: RF
        proceso: bifásico (Perfil → Diseño)
        source_id: MEC-G06-DIRECTA

      - id: MEC-TRANSFER-PUB
        name: "Transferencia a Entidad Pública"
        description: "Programas ejecutados por otra entidad pública"
        evaluador: GORE
        dictamen: ITF
        proceso: trifásico (Admisibilidad → Pertinencia → Técnica)
        exento_de: [DIPRES/SES, SNI]
        source_id: MEC-TRANSFER-PUB

      - id: MEC-SUBV8
        name: "8% FNDR - Vinculación Comunitaria"
        description: "Subvenciones para actividades acotadas"
        evaluador: COMITE_EVALUADOR_GORE
        dictamen: CONCURSO
        destinatarios: [ORG-COMUNITARIA, INST-PRIVADA-SFL, MUNICIPALIDAD]
        source_id: MEC-SUBV8

      - id: MEC-FRPD-PROGRAMA
        name: "FRPD - Programas Productivos"
        description: "Royalty para programas de fomento"
        evaluador: COMITE_FRPD
        dictamen: CONCURSO

      - id: MEC-EMERGENCIA
        name: "Ayudas Tempranas y Emergencias"
        description: "Respuesta rápida ante desastres"
        evaluador: GORE + MIN-INTERIOR
        dictamen: EXENTO
        exento_de: [G06_EXANTE]

  # ─────────────────────────────────────────────────────────────────────────────
  # 1.3 SISTEMAS DE DICTAMEN (Mónadas de Efecto)
  # ─────────────────────────────────────────────────────────────────────────────
  - id: Ω-DICTAMEN
    type: Ω-Object (Effect Constructor)
    description: "Resultado de evaluación según sistema aplicable"

    systems:
      RATE:
        id: Ω-RATE
        name: "Resultado Análisis Técnico-Económico"
        source: MDSF
        plataforma: BIP
        applies_to: [MEC-SNI-GENERAL, MEC-C33-CONSERVACION]
        outputs:
          - RS: "Recomendado Satisfactoriamente"
          - FI: "Falta Información"
          - OT: "Objetado Técnicamente"
          - AD: "Admisible (Conservación)"

      RF:
        id: Ω-RF
        name: "Recomendación Favorable"
        source: DIPRES/SES
        plataforma: Formularios Perfil/Diseño
        applies_to: [MEC-G06-DIRECTA]
        outputs:
          - RF: "Recomendación Favorable"
          - FI: "Observaciones pendientes"
          - OT: "Rechazado"

      ITF:
        id: Ω-ITF
        name: "Informe Técnico Favorable"
        source: GORE (interno)
        plataforma: GESDOC
        applies_to: [MEC-TRANSFER-PUB]
        outputs:
          - ITF_OK: "Recomendado Favorablemente"
          - ITF_OBS: "Recomendado con Observaciones"
          - NO_REC: "No Recomendado"
        warning: "NO es RS del SNI, es sistema paralelo"

      CONCURSO:
        id: Ω-CONCURSO
        name: "Evaluación Competitiva por Mérito"
        source: Comité Evaluador
        applies_to: [MEC-SUBV8, MEC-FRPD-CAPITAL, MEC-FRPD-PROGRAMA]
        outputs:
          - ELEGIBLE: "Cumple puntaje mínimo"
          - NO_ELEGIBLE: "No cumple requisitos"
          - LISTA_ESPERA: "Elegible sin cupo"

  # ─────────────────────────────────────────────────────────────────────────────
  # 1.4 ACTORES DEL SISTEMA (Exhaustivo)
  # ─────────────────────────────────────────────────────────────────────────────
  - id: Ω-ACTOR
    type: Ω-Object (Agent)
    description: "Agentes que participan en el ciclo de vida IPR"

    autoridades_gore:
      - id: GOBERNADOR
        role: "Máxima autoridad regional, firma actos administrativos"
      - id: ADMIN-REGIONAL
        role: "Administrador/a Regional, coordinación operativa"

    divisiones_gore:
      - id: DIPIR
        role: "División de Presupuesto e Inversión Regional"
        source_id: GN-IPR-GLOS-DIPIR
      - id: DIPLADE
        role: "División de Planificación y Desarrollo Regional"
        source_id: GN-IPR-GLOS-DIPLADE
      - id: DAF
        role: "División de Administración y Finanzas"
      - id: PREINVERSION
        role: "Jefatura/Depto. de Preinversión (DIPIR)"
      - id: PRESUPUESTO
        role: "Depto. de Presupuesto (DAF)"
      - id: JURIDICO
        role: "Asesoría Jurídica, visación de actos"
      - id: CONTROL
        role: "Unidad de Control Interno"

    instancias_colegiadas:
      - id: CDR
        role: "Comité Directivo Regional (filtro pertinencia)"
        composicion: [DIPLADE, DIPIR, DAF, REZAGO, ADMIN-REGIONAL]
        source_id: GN-IPR-GLOS-CDR
      - id: CORE
        role: "Consejo Regional (aprobación financiamiento)"
        source_id: GN-IPR-GLOS-CORE
      - id: COMITE-PERTINENCIA
        role: "Evaluación de pertinencia estratégica"
      - id: COMITE-EVALUADOR
        role: "Evaluación competitiva (concursos)"
      - id: JUNTA-CALIFICADORA
        role: "Calificación de funcionarios"

    organismos_externos:
      - id: MDSF
        role: "Ministerio de Desarrollo Social y Familia (RATE)"
        source_id: GN-IPR-GLOS-MDSF
      - id: SES
        role: "Subsecretaría de Evaluación Social"
        source_id: DEF-SES
      - id: DIPRES
        role: "Dirección de Presupuestos (RF, visaciones)"
        source_id: DEF-DIPRES
      - id: CGR
        role: "Contraloría General (Toma de Razón, SISREC)"
      - id: SUBDERE
        role: "Subsecretaría de Desarrollo Regional (FRIL)"
        source_id: ORG-SUBDERE
      - id: SUBCTCI
        role: "Subsecretaría de Ciencia y Tecnología (FRPD)"
      - id: MIN-INTERIOR
        role: "Ministerio del Interior (Emergencias)"

    ejecutores:
      - id: UT-RECEPTORA
        role: "Unidad Técnica Receptora del convenio"
      - id: MUNICIPALIDAD
        role: "Ejecutor FRIL y transferencias municipales"
        source_id: ORG-MUNICIPALIDAD
      - id: SERVICIO-PUBLICO
        role: "Servicio público receptor"
      - id: UNIVERSIDAD
        role: "Universidad estatal/acreditada"
      - id: ORG-COMUNITARIA
        role: "Organización comunitaria (8%)"
      - id: INST-PRIVADA-SFL
        role: "Institución privada sin fines de lucro"
      - id: CORFO
        role: "Corporación de Fomento (FRPD)"
      - id: ANID
        role: "Agencia Nacional de Investigación y Desarrollo"

    roles_operativos:
      - id: UNIDAD-FORMULADORA
        role: "Entidad que formula y presenta la IPR"
      - id: SUPERVISOR-GORE
        role: "Profesional que supervisa ejecución"
      - id: ANALISTA-DIPIR
        role: "Analista de preinversión"
      - id: ANALISTA-MDSF
        role: "Evaluador externo SNI"
      - id: SECRETARIO-CORE
        role: "Emite certificados de acuerdo CORE"
      - id: OFICINA-PARTES
        role: "Recepción y registro documental"

  # ─────────────────────────────────────────────────────────────────────────────
  # 1.5 DOCUMENTOS Y ARTEFACTOS
  # ─────────────────────────────────────────────────────────────────────────────
  - id: Ω-DOCUMENTO
    type: Ω-Object
    essence: Informational
    instances:
      - CDP: "Certificado de Disponibilidad Presupuestaria"
      - CERTIFICADO_CORE: "Certificado de Acuerdo CORE"
      - CONVENIO: "Convenio de Transferencia"
      - RESOLUCION: "Resolución que aprueba convenio"
      - DECRETO: "Decreto de modificación presupuestaria"
      - ACTA_CDR: "Acta de sesión CDR"
      - ACTA_RECEPCION: "Acta de recepción de obras"
      - RENDICION: "Rendición de cuentas (SISREC)"
      - INFORME_TECNICO: "Informe técnico de evaluación"

# ═══════════════════════════════════════════════════════════════════════════════
# SECCIÓN 2: Ω-PROCESSES (Morfismos de Transformación)
# ═══════════════════════════════════════════════════════════════════════════════

omega_processes:
  # Fase 1: Ingreso y Admisibilidad
  - id: P-INGRESAR
    type: Ω-Transform
    name: "Ingresar Postulación"
    source: POSTULACION_EXTERNA
    target: POSTULACION_REGISTRADA
    actor: OFICINA-PARTES
    output: "Número de ingreso único"

  - id: P-FILTRAR-CDR
    type: Ω-Transform
    name: "Filtrar Pertinencia CDR"
    source: POSTULACION_REGISTRADA
    target: PRE_ADMISIBLE | NO_PRE_ADMISIBLE
    actor: CDR
    criteria: [coherencia_erd, viabilidad_preliminar]

  - id: P-REVISAR-FORMAL
    type: Ω-Transform
    name: "Revisar Admisibilidad Formal"
    source: PRE_ADMISIBLE
    target: ADMISIBLE | ADMISIBLE_OBS | INADMISIBLE
    actor: ANALISTA-DIPIR

  # Fase 2: Evaluación (Kleisli Arrows)
  - id: P-EVALUAR-SNI
    type: Kleisli(Ω-RATE)
    name: "Evaluar Técnico-Económico SNI"
    source: Ω-IDI
    target: T_RATE(Ω-IDI)
    actor: MDSF
    plazos:
      admisibilidad: "5 días"
      ate: "10 días"
    subsanacion_max: "60 días hábiles"

  - id: P-EVALUAR-PPR
    type: Kleisli(Ω-RF)
    name: "Evaluar Programa Glosa 06"
    source: Ω-PPR
    target: T_RF(Ω-PPR)
    actor: DIPRES/SES
    fases: [Perfil, Diseño]

  - id: P-EVALUAR-TRANSFER
    type: Kleisli(Ω-ITF)
    name: "Evaluar Transferencia Pública"
    source: Ω-PPR-TRANSFER
    target: T_ITF(Ω-PPR-TRANSFER)
    actor: GORE
    fases: [Admisibilidad, Pertinencia, Técnica]

  - id: P-EVALUAR-CONCURSO
    type: Kleisli(Ω-CONCURSO)
    name: "Evaluar Concurso Competitivo"
    source: Ω-SUBVENCION | Ω-FRPD
    target: T_CONC(IPR)
    actor: COMITE-EVALUADOR

  # Fase 3: Financiamiento
  - id: P-APROBAR-CORE
    type: Ω-Align
    name: "Aprobar Financiamiento CORE"
    source: CARTERA_RS
    target: APROBADO_CORE | RECHAZADO_CORE
    actor: CORE
    condicion: "IDI > 7000 UTM requiere CORE obligatorio"

  - id: P-EMITIR-CDP
    type: Ω-Transform
    name: "Emitir CDP"
    source: APROBADO_CORE | APROBADO_TECNICO
    target: CDP_EMITIDO
    actor: PRESUPUESTO

  # Fase 4: Formalización
  - id: P-FORMALIZAR-CONVENIO
    type: Ω-Transform
    name: "Formalizar Convenio"
    source: CDP_EMITIDO
    target: CONVENIO_FIRMADO
    actor: [GOBERNADOR, UT-RECEPTORA]
    documento: CONVENIO

  - id: P-TRAMITAR-RESOLUCION
    type: Ω-Transform
    name: "Tramitar Resolución Aprobatoria"
    source: CONVENIO_FIRMADO
    target: CONVENIO_TRAMITADO
    actor: [PRESUPUESTO, CGR]
    documento: RESOLUCION

  # Fase 5: Ejecución
  - id: P-EJECUTAR
    type: Coalgebra
    name: "Ejecutar IPR"
    functor: "γ: State → (Event × State) + Terminal"
    source: CONVENIO_TRAMITADO
    target: EN_EJECUCION
    outputs: [AVANCE_FISICO, AVANCE_FINANCIERO, RENDICION]

  # Fase 6: Modificaciones
  - id: P-MODIFICAR
    type: Ω-Transform
    name: "Gestionar Modificación"
    source: EN_EJECUCION
    target: MODIFICACION_APROBADA | MODIFICACION_RECHAZADA
    actor: DIPIR
    puede_requerir: [CORE, SNI]

  # Fase 7: Cierre
  - id: P-CERRAR-TECNICO
    type: Ω-Transform
    name: "Cierre Técnico"
    source: EJECUCION_COMPLETA
    target: CIERRE_TECNICO
    actor: SUPERVISOR-GORE
    documento: ACTA_RECEPCION

  - id: P-CERRAR-FINANCIERO
    type: Ω-Transform
    name: "Cierre Financiero"
    source: CIERRE_TECNICO
    target: CERRADO
    actor: DAF
    documento: RENDICION

# ═══════════════════════════════════════════════════════════════════════════════
# SECCIÓN 3: Ω-COALGEBRA (Ciclo de Vida IPR)
# ═══════════════════════════════════════════════════════════════════════════════

omega_coalgebra:
  id: Ω-IPR-LIFECYCLE
  type: Coalgebra
  functor: "F(S) = (Event × S) + Termination"

  state_space:
    fase_1_ingreso:
      - FORMULACION
      - POSTULADA
      - PRE_ADMISIBLE_CDR
      - NO_PRE_ADMISIBLE
      - PARA_REVISION_TECNICA
      - EN_CARTERA_PRE_ADMISIBLE
      - ADMISIBLE
      - ADMISIBLE_OBS
      - INADMISIBLE

    fase_2_evaluacion:
      - ENVIADO_MDSF
      - ENVIADO_DIPRES
      - EN_EVALUACION_GORE
      - RS
      - RF
      - AD
      - FI
      - OT
      - ELEGIBLE
      - NO_ELEGIBLE
      - APROBADO_TECNICO

    fase_3_financiamiento:
      - CARTERA_CORE
      - APROBADO_CORE
      - RECHAZADO_CORE
      - CDP_EMITIDO
      - ENVIADO_FINANCIAMIENTO

    fase_4_formalizacion:
      - CONVENIO_FIRMADO
      - CONVENIO_TRAMITADO
      - TRANSFERENCIA_PROGRAMADA

    fase_5_ejecucion:
      - EN_EJECUCION
      - LICITACION_EN_CURSO
      - ADJUDICADO
      - CONTRATO_FIRMADO
      - OBRA_EN_TERRENO

    fase_6_modificaciones:
      - MODIFICACION_SOLICITADA
      - MODIFICACION_EN_EVALUACION
      - MODIFICACION_APROBADA
      - MODIFICACION_RECHAZADA

    fase_7_cierre:
      - RECEPCION_PROVISORIA
      - RECEPCION_DEFINITIVA
      - CIERRE_TECNICO
      - CIERRE_FINANCIERO
      - CERRADO

    terminales:
      - CERRADO
      - INADMISIBLE_INFORMADO
      - OT
      - RECHAZADO_CORE
      - NO_PRE_ADMISIBLE

  transitions:
    - from: FORMULACION
      to: POSTULADA
      event: "Ingreso Oficio Oficina de Partes"
      morphism: P-INGRESAR

    - from: POSTULADA
      to: PRE_ADMISIBLE_CDR
      event: "Sesión CDR"
      morphism: P-FILTRAR-CDR
      guard: "coherencia_erd ∧ viabilidad_preliminar"

    - from: PRE_ADMISIBLE_CDR
      to: ADMISIBLE
      event: "Revisión Formal OK"
      morphism: P-REVISAR-FORMAL

    - from: ADMISIBLE
      to: ENVIADO_MDSF
      event: "Oficio a MDSF"
      guard: "mecanismo ∈ {MEC-SNI-GENERAL}"

    - from: ENVIADO_MDSF
      to: RS
      event: "RATE favorable"
      morphism: P-EVALUAR-SNI
      effect: "Bind monádico → habilita CORE"

    - from: RS
      to: APROBADO_CORE
      event: "Votación CORE"
      morphism: P-APROBAR-CORE
      guard: "monto > 7000 UTM"

    - from: APROBADO_CORE
      to: CDP_EMITIDO
      event: "Emisión CDP"
      morphism: P-EMITIR-CDP

    - from: CDP_EMITIDO
      to: CONVENIO_FIRMADO
      event: "Firma bilateral"
      morphism: P-FORMALIZAR-CONVENIO

    - from: CONVENIO_FIRMADO
      to: CONVENIO_TRAMITADO
      event: "Toma de Razón CGR"
      morphism: P-TRAMITAR-RESOLUCION

    - from: CONVENIO_TRAMITADO
      to: EN_EJECUCION
      event: "Transferencia de fondos"
      morphism: P-EJECUTAR

    - from: EN_EJECUCION
      to: CIERRE_TECNICO
      event: "Recepción definitiva"
      morphism: P-CERRAR-TECNICO

    - from: CIERRE_TECNICO
      to: CERRADO
      event: "Rendición aprobada"
      morphism: P-CERRAR-FINANCIERO

# ═══════════════════════════════════════════════════════════════════════════════
# SECCIÓN 4: Ω-CONSTRUCTIONS (Límites, Colímites, Adjunciones)
# ═══════════════════════════════════════════════════════════════════════════════

omega_constructions:
  # Fibración de Grothendieck
  - id: Ω-MECANISMO-FIBRATION
    type: GrothendieckFibration
    name: "Polimorfismo de Mecanismos de Financiamiento"
    base_category: TipoIPR
    total_category: Mecanismos
    projection: "p: Mecanismo → TipoIPR"

    fibers:
      - base_object: Proyecto
        fiber:
          [
            MEC-SNI-GENERAL,
            MEC-FRIL,
            MEC-C33-CONSERVACION,
            MEC-C33-ANF,
            MEC-C33-ESTUDIOS,
            MEC-5000UTM,
            MEC-FRPD-CAPITAL,
          ]

      - base_object: Programa
        fiber:
          [
            MEC-G06-DIRECTA,
            MEC-TRANSFER-PUB,
            MEC-SUBV8,
            MEC-FRPD-PROGRAMA,
            MEC-EMERGENCIA,
          ]

    morphism_lifting:
      description: "Transporte entre fibras requiere transformación natural"
      example: "FRIL que supera 5000 UTM → migrar a SNI-General"

  # Pullback de Admisibilidad
  - id: Ω-ADMISIBILIDAD-PULLBACK
    type: Pullback
    name: "Admisibilidad como Límite"
    diagram: |
      Admisibilidad ----→ Checklist
           |                   |
           v                   v
      Postulación ------→ RequisitosMecanismo
    invariant: "presented ⊆ required ⟹ ADMISIBLE"

  # Adjunción Selector
  - id: Ω-SELECTOR-ADJUNCTION
    type: Adjunction
    name: "Selector de Vías como Funtor Libre"
    left_adjoint:
      name: "Classify"
      signature: "IPR → Mecanismo"
    right_adjoint:
      name: "Forget"
      signature: "Mecanismo → IPR"
    unit: "η: IPR → Forget(Classify(IPR))"
    counit: "ε: Classify(Forget(M)) → M"

# ═══════════════════════════════════════════════════════════════════════════════
# SECCIÓN 5: Ω-MONADS (Sistemas de Evaluación como Efectos)
# ═══════════════════════════════════════════════════════════════════════════════

omega_monads:
  - id: Ω-RATE-MONAD
    type: Monad
    name: "Evaluación Técnico-Económica SNI"
    applies_to: [MEC-SNI-GENERAL, MEC-C33-CONSERVACION, MEC-5000UTM]
    evaluator: MDSF
    structure: "T_RATE(X) = X × {RS} + X × {AD} + {FI(gaps)} + {OT(reason)}"
    kleisli_arrow:
      source: Ω-IDI
      target: T_RATE(Ω-IDI)
      operation: "evaluar_sni(idi)"
    laws:
      return: "η(x) = x en estado 'pendiente RATE'"
      bind: "m >>= f propaga FI/OT (short-circuit)"
    outcomes:
      RS: "Recomendado Satisfactoriamente → habilita CORE"
      AD: "Admisible (conservación) → habilita financiamiento"
      FI: "Falta Información → subsanar en ≤60 días hábiles"
      OT: "Objetado Técnicamente → terminal"

  - id: Ω-RF-MONAD
    type: Monad
    name: "Evaluación Ex-Ante de Programas"
    applies_to: [MEC-G06-DIRECTA]
    evaluator: DIPRES/SES
    structure: "T_RF(X) = X × {RF} + {FI(obs)} + {OT(rechazo)}"
    process: [Perfil, Diseño_MML]
    kleisli_arrow:
      source: Ω-PPR
      target: T_RF(Ω-PPR)
      operation: "evaluar_programa(ppr)"
    outcomes:
      RF: "Recomendación Favorable → habilita Glosa 06"
      FI: "Observaciones → iteración"
      OT: "Rechazado → no procede"

  - id: Ω-ITF-MONAD
    type: Monad
    name: "Evaluación Interna de Transferencias"
    applies_to: [MEC-TRANSFER-PUB]
    evaluator: GORE
    structure: "T_ITF(X) = X × {ITF_OK} + X × {ITF_OBS} + {NO_REC}"
    process:
      [Admisibilidad_Documental, Pertinencia_Estratégica, Evaluación_Técnica]
    kleisli_arrow:
      source: Ω-PPR-TRANSFER
      target: T_ITF(Ω-PPR-TRANSFER)
      operation: "evaluar_transferencia(ppr)"
    outcomes:
      ITF_OK: "Informe Técnico Favorable → habilita financiamiento"
      ITF_OBS: "Favorable con Observaciones → subsanar"
      NO_REC: "No Recomendado → rechazado"
    warning: "NO es RS del SNI"

  - id: Ω-CONCURSO-MONAD
    type: Monad
    name: "Evaluación Competitiva por Mérito"
    applies_to: [MEC-SUBV8, MEC-FRPD-CAPITAL, MEC-FRPD-PROGRAMA]
    evaluator: Comité_Evaluador
    structure: "T_CONC(X) = X × {ELEGIBLE, puntaje} + {NO_ELEGIBLE} + {LISTA_ESPERA}"
    outcomes:
      ELEGIBLE: "Cumple puntaje mínimo → financiable"
      NO_ELEGIBLE: "No cumple requisitos"
      LISTA_ESPERA: "Elegible sin cupo"

  - id: Ω-TECNICA-MONAD
    type: Monad
    name: "Evaluación Técnica GORE (Exenta)"
    applies_to: [MEC-FRIL, MEC-5000UTM]
    evaluator: GORE (DIPRES/DIINF)
    structure: "T_TEC(X) = X × {APROBADO} + {OBSERVADO} + {RECHAZADO}"
    outcomes:
      APROBACION_TECNICA: "Cumple estándar técnico → financiable"
      OBSERVADO: "Observaciones técnicas → subsanar"
      RECHAZADO: "No cumple estándar"

# ═══════════════════════════════════════════════════════════════════════════════
# SECCIÓN 6: Ω-PROFUNCTOR (Selector ↔ Gestión)
# ═══════════════════════════════════════════════════════════════════════════════

omega_profunctor:
  id: Ω-GESTION-IPR-PROFUNCTOR
  type: Profunctor
  signature: "Π: Selector^op × Gestión → Set"
  source_category: "kb_gn_011_selector_ipr_koda.yml"
  target_category: "kb_gn_019_gestion_ipr_koda.yml"

  mappings:
    - selector: MEC-SNI-GENERAL
      gestion:
        fase2: GN-IPR-F2-TRACK-A-SNI
        fase3: GN-IPR-F3-CON-CORE
        dictamen: RATE

    - selector: MEC-FRIL
      gestion:
        fase2: GN-IPR-F2-C-FRIL-8FNDR-FRPD-CIRC33
        fase3: GN-IPR-F3-SIN-CORE
        dictamen: APROBACION_TECNICA

    - selector: MEC-G06-DIRECTA
      gestion:
        fase2: GN-IPR-F2-TRACK-B-PPR
        fase3: GN-IPR-F3-CON-CORE
        dictamen: RF

    - selector: MEC-TRANSFER-PUB
      gestion:
        fase2: Evaluación_Interna_GORE
        fase3: GN-IPR-F3-CON-CORE
        dictamen: ITF

    - selector: MEC-SUBV8
      gestion:
        fase2: Concurso_Competitivo
        fase3: Asignación_Directa_o_Concurso
        dictamen: CONCURSO

    - selector: MEC-FRPD-CAPITAL
      gestion:
        fase2: FRPD-FASE3-GORE
        fase3: Depende_Tipo
        dictamen: CONCURSO

  composition_law: "Selector(M) determina unívocamente Track(Fase2) y Dictamen"

# ═══════════════════════════════════════════════════════════════════════════════
# SECCIÓN 7: Ω-AXIOMS (Invariantes Categóricos)
# ═══════════════════════════════════════════════════════════════════════════════

omega_axioms:
  - id: AX-MECANISMO-DETERMINA-TRACK
    statement: "El mecanismo de financiamiento determina unívocamente el track de evaluación"
    formal: "∀ ipr. Mecanismo(ipr) → Track(ipr)"

  - id: AX-PULLBACK-ADMISIBILIDAD
    statement: "La admisibilidad es el pullback de requisitos sobre documentos presentados"
    implication: "No hay ambigüedad: cumple o no cumple"

  - id: AX-MONAD-PROPAGATION
    statement: "FI/OT se propagan monádicamente; RS/RF/AD/ITF habilitan bind a siguiente fase"

  - id: AX-FIBRATION-TRANSPORT
    statement: "Cambiar de mecanismo requiere funtor de transporte entre fibras"
    example: "FRIL → SNI requiere reevaluación completa"

  - id: AX-COALGEBRA-TERMINATION
    statement: "Todo estado tiene transición a estado sucesor o a terminal"
    formal: "∀ s ∈ State. γ(s) = (e, s') ∨ γ(s) = ★"

  - id: AX-CORE-OBLIGATORIO
    statement: "IDI > 7000 UTM requiere paso por CORE (invariante institucional)"

  - id: AX-DICTAMEN-EXCLUSIVO
    statement: "Cada mecanismo tiene exactamente un sistema de dictamen aplicable"
    formal: "∀ m ∈ Mecanismo. |Dictamen(m)| = 1"

  - id: AX-PROFUNCTOR-DETERMINISMO
    statement: "El profuntor Selector→Gestión es funcional (determinista)"

  - id: AX-EXENTO-NO-BYPASA
    statement: "Exención de evaluación central NO implica ausencia de evaluación"
    implication: "MEC-TRANSFER-PUB tiene evaluación GORE rigurosa"
